import{N as oo}from"./NavBar-B3H9AHOk.js";import{M as no}from"./MyTabbar-DnLCwGaQ.js";import{p as _,c as F,m as to,a as eo,t as G,d as W,u as so,b as q,w as io,e as ao,f as g,g as O,n as H,h as lo,_ as ro,P as I,r as p,i as co,j as mo,k as uo,o as fo,l as b,q as l,s as c,v as V,x as C,S as K,y as e,z as i,A as z,B as po,C as go,D as vo}from"./index-B3I7qvaU.js";import{g as ho,a as wo,h as yo,b as Co,p as ko}from"./api-iKSGGYan.js";import{_ as So}from"./one-CXrO1K9a.js";import"./use-placeholder-e2PyHWkL.js";function _o(t,n){const{days:h}=n;let{hours:o,minutes:m,seconds:d,milliseconds:u}=n;if(t.includes("DD")?t=t.replace("DD",_(h)):o+=h*24,t.includes("HH")?t=t.replace("HH",_(o)):m+=o*60,t.includes("mm")?t=t.replace("mm",_(m)):d+=m*60,t.includes("ss")?t=t.replace("ss",_(d)):u+=d*1e3,t.includes("S")){const r=_(u,3);t.includes("SSS")?t=t.replace("SSS",r):t.includes("SS")?t=t.replace("SS",r.slice(0,2)):t=t.replace("S",r.charAt(0))}return t}const[bo,Uo]=F("count-down"),To={time:to(0),format:eo("HH:mm:ss"),autoStart:G,millisecond:Boolean};var Po=W({name:bo,props:To,emits:["change","finish"],setup(t,{emit:n,slots:h}){const{start:o,pause:m,reset:d,current:u}=so({time:+t.time,millisecond:t.millisecond,onChange:S=>n("change",S),onFinish:()=>n("finish")}),r=q(()=>_o(t.format,u.value)),w=()=>{d(+t.time),t.autoStart&&o()};return io(()=>t.time,w,{immediate:!0}),ao({start:o,pause:m,reset:w}),()=>g("div",{role:"timer",class:Uo()},[h.default?h.default(u.value):r.value])}});const M=O(Po),[Ro,B]=F("progress"),Bo={color:String,inactive:Boolean,pivotText:String,textColor:String,showPivot:G,pivotColor:String,trackColor:String,strokeWidth:H,percentage:{type:H,default:0,validator:t=>+t>=0&&+t<=100}};var Do=W({name:Ro,props:Bo,setup(t){const n=q(()=>t.inactive?void 0:t.color),h=()=>{const{textColor:o,pivotText:m,pivotColor:d,percentage:u}=t,r=m??`${u}%`;if(t.showPivot&&r){const w={color:o,left:`${+u}%`,transform:`translate(-${+u}%,-50%)`,background:d||n.value};return g("span",{style:w,class:B("pivot",{inactive:t.inactive})},[r])}};return()=>{const{trackColor:o,percentage:m,strokeWidth:d}=t,u={background:o,height:lo(d)},r={width:`${m}%`,background:n.value};return g("div",{class:B(),style:u},[g("span",{class:B("portion",{inactive:t.inactive}),style:r},null),h()])}}});const E=O(Do),Lo=""+new URL("icon11-BP-IXX_4.png",import.meta.url).href,No=""+new URL("icon1-CabFUzrM.png",import.meta.url).href,xo=""+new URL("icon33-B49QxJFE.png",import.meta.url).href,jo=""+new URL("icon3-E4ShYdK9.png",import.meta.url).href,Ho=""+new URL("icon5-ByR6CkOw.png",import.meta.url).href,Io=""+new URL("icon7-BRWn4_Px.png",import.meta.url).href,Vo=""+new URL("icon22-Bs8myrgK.png",import.meta.url).href,Ko=""+new URL("icon2-Vz8uxzxC.png",import.meta.url).href,zo=""+new URL("icon44-D8HKDqdz.png",import.meta.url).href,Mo=""+new URL("icon4-I2gNfyMN.png",import.meta.url).href,Eo=""+new URL("icon66-CSzElCyg.png",import.meta.url).href,Fo=""+new URL("icon6-Chp2E9-W.png",import.meta.url).href,Go=""+new URL("icon88-BGqJwtDC.png",import.meta.url).href,Wo=""+new URL("icon8-B35KqxTU.png",import.meta.url).href,qo=""+new URL("egg-CvBl--JO.png",import.meta.url).href,Oo=""+new URL("../imgs/hand.png",import.meta.url).href,Yo=""+new URL("super-D-gdSZbi.png",import.meta.url).href,Ao=""+new URL("times-CYYbz3ww.png",import.meta.url).href,Jo={components:{NavbarVue:oo,MyTabbarVue:no,[I.name]:I,[E.name]:E,[M.name]:M},setup(){let t=p(!1),n=p(!1),h=p(!1),o=p(!1),m=p(!1),d=p(!1);const u=co(),r=p(!1),w=p(0),S=localStorage.token;let v=["app:superhatch:amount","app:hatchnum:amount","app:hatchnum:num","app:ton:address"];const s=p({}),k=p({}),D=p(0),L=p(0),T=p(""),[N]=mo(),{locale:P}=uo();async function R(){try{const a=await wo(),f=await yo();if(console.log(a),a.code==200&&(s.value=a.data),f.code==200){D.value=f.data.hatching?f.data.hatching.remainingSecond:0,L.value=f.data.hatching?f.data.hatching.totalSecond:1,r.value=f.data.hatching!=null;let y=f.data.showTipList;y.length&&y[0].status==1&&y[0].showTip==0&&(T.value=y[0].pet.image,j())}}catch(a){console.error("失败:",a)}}fo(()=>{S&&x()});function x(){console.log(222222222),R(),Y()}function j(){d.value=!1,o.value=!0,setTimeout(()=>{o.value=!1},900),setTimeout(()=>{m.value=!0,setTimeout(()=>{d.value=!0,setTimeout(()=>{m.value=!1},700)},100)},700)}async function Y(){const a=await ho(v);a.code==200&&(k.value=a.data)}function A(){Number(s.value.hatchTodayNum)+Number(s.value.hatchPerpetualNum)>0?t.value=!0:z(P.value=="en"?"Currently, there are no incubation attempts available":"当前暂无孵化次数")}function J(a){u.push(a)}async function X(){t.value=!1;const a=await Co();a.code==200&&(R(),s.value.superHatch==1?(T.value=a.data.pet.image,j()):r.value=!0)}function Z(){s.value.superHatch==0?n.value=!0:z(P.value=="en"?"You have purchased":"您已购买")}async function Q(a){n.value=!1,h.value=!1;let f=a==1?k.value[v[1]]*1e9:k.value[v[0]]*1e9;console.log(k.value[v[3]],f.toString());const y={validUntil:Math.floor(Date.now()/1e3)+60,messages:[{address:k.value[v[3]],amount:f.toString()}]};console.log(y,N);try{const U=await N.sendTransaction(y);$(a),console.log(111111,U)}catch(U){console.log(U,typeof U)}}async function $(a){const f=await ko({type:a});f.code==200&&(po(f.msg),R())}return{showCenter:t,showSuper:n,showTimes:h,showGif:o,jumpto:J,inProgress:r,active:w,locale:P,onConfirm:X,userInfo:s,config:k,configKey:v,remainingSecond:D,toHatch:A,toBuy:Q,totalSecond:L,showPet:m,showScale:d,petUrl:T,loadData:x,buySuper:Z}}},Xo={class:"page"},Zo={class:"iconWrap"},Qo={class:"flex-bw"},$o={class:"flex1"},on={class:"flex1"},nn={class:"flex-bw btns"},tn={class:"flex"},en={class:"fs-16"},sn={class:"flex"},an={class:"fs-16"},ln={class:"wrap flex1"},rn={class:"income flex"},cn={class:"yellow"},mn={key:0,class:"flex buttons"},un={key:1,class:"flex progress"},dn={class:"van_progress"},fn={class:"countdown flex"},pn={class:"modal flex1"},gn={class:"flex"},vn={class:"modal modal1 flex1"},hn={class:"flex1"},wn={class:"flex"},yn={class:"modal modal1 flex1"},Cn={class:"flex1"},kn={class:"flex"},Sn={key:0,class:"gif",src:So,alt:""},_n=["src"];function bn(t,n,h,o,m,d){const u=b("NavbarVue"),r=b("MyTabbarVue"),w=b("van-progress"),S=b("van-count-down"),v=b("van-popup");return l(),c("div",Xo,[(l(),V(K,{onInitData:o.loadData},{default:C(()=>[g(u)]),_:1},8,["onInitData"])),(l(),V(K,null,{default:C(()=>[g(r,{active:o.active},null,8,["active"])]),_:1})),e("div",Zo,[e("div",Qo,[e("div",$o,[o.locale=="en"?(l(),c("img",{key:0,class:"icons",onClick:n[0]||(n[0]=s=>o.jumpto("/synthesis")),src:Lo,alt:""})):(l(),c("img",{key:1,class:"icons",onClick:n[1]||(n[1]=s=>o.jumpto("/synthesis")),src:No,alt:""})),o.locale=="en"?(l(),c("img",{key:2,class:"icons",onClick:n[2]||(n[2]=s=>o.jumpto("/myPet")),src:xo,alt:""})):(l(),c("img",{key:3,class:"icons",onClick:n[3]||(n[3]=s=>o.jumpto("/myPet")),src:jo,alt:""})),e("img",{class:"icons",onClick:n[4]||(n[4]=s=>o.jumpto("/kong")),src:Ho,alt:""}),e("img",{class:"icons",onClick:n[5]||(n[5]=s=>o.jumpto("/ranking")),src:Io,alt:""})]),e("div",on,[o.locale=="en"?(l(),c("img",{key:0,class:"icons",onClick:n[6]||(n[6]=s=>o.jumpto("/getHelp")),src:Vo,alt:""})):(l(),c("img",{key:1,class:"icons",onClick:n[7]||(n[7]=s=>o.jumpto("/getHelp")),src:Ko,alt:""})),o.locale=="en"?(l(),c("img",{key:2,class:"icons",onClick:n[8]||(n[8]=s=>o.jumpto("/invite")),src:zo,alt:""})):(l(),c("img",{key:3,class:"icons",onClick:n[9]||(n[9]=s=>o.jumpto("/invite")),src:Mo,alt:""})),o.locale=="en"?(l(),c("img",{key:4,class:"icons",onClick:n[10]||(n[10]=s=>o.jumpto("/airdrop")),src:Eo,alt:""})):(l(),c("img",{key:5,class:"icons",onClick:n[11]||(n[11]=s=>o.jumpto("/airdrop")),src:Fo,alt:""}))])]),e("div",nn,[e("button",tn,[e("span",null,i(t.$t("今日孵化"))+"：",1),e("span",en,i(o.userInfo.hatchTodayNum)+i(t.$t("次")),1)]),e("button",sn,[e("span",null,i(t.$t("永久孵化"))+"：",1),e("span",an,i(o.userInfo.hatchPerpetualNum)+i(t.$t("次")),1)])]),o.locale=="en"?(l(),c("img",{key:0,onClick:n[12]||(n[12]=(...s)=>o.buySuper&&o.buySuper(...s)),class:"super",src:Go,alt:""})):(l(),c("img",{key:1,onClick:n[13]||(n[13]=(...s)=>o.buySuper&&o.buySuper(...s)),class:"super",src:Wo,alt:""}))]),e("div",ln,[n[28]||(n[28]=e("img",{class:"egg",src:qo,alt:""},null,-1)),e("div",rn,[e("span",null,i(t.$t("我的收益"))+"：",1),e("span",cn,i(o.userInfo.earning)+"/h",1)]),o.inProgress?(l(),c("div",un,[e("span",null,i(t.$t("孵化进度")),1),e("div",dn,[g(w,{percentage:(1-o.remainingSecond/o.totalSecond)*100,color:"#F5BB30","show-pivot":!1,"track-color":"#413E5A"},null,8,["percentage"]),e("div",fn,[g(S,{time:o.remainingSecond*1e3,format:"mm"+t.$t("分")+"ss"+t.$t("秒")},null,8,["time","format"])])]),e("img",{onClick:n[16]||(n[16]=s=>o.jumpto("/getHelp")),src:Oo,alt:""})])):(l(),c("div",mn,[e("button",{onClick:n[14]||(n[14]=(...s)=>o.toHatch&&o.toHatch(...s))},i(t.$t("孵化")),1),e("button",{onClick:n[15]||(n[15]=s=>o.showTimes=!0)},i(t.$t("暴击孵化次数")),1)]))]),g(v,{show:o.showCenter,"onUpdate:show":n[19]||(n[19]=s=>o.showCenter=s),round:""},{default:C(()=>[e("div",pn,[e("div",null,i(t.$t("是否确认进行孵化操作"))+"？",1),e("div",gn,[e("button",{onClick:n[17]||(n[17]=s=>o.showCenter=!1)},i(t.$t("取消")),1),e("button",{onClick:n[18]||(n[18]=(...s)=>o.onConfirm&&o.onConfirm(...s))},i(t.$t("确定")),1)])])]),_:1},8,["show"]),g(v,{show:o.showSuper,"onUpdate:show":n[22]||(n[22]=s=>o.showSuper=s),round:""},{default:C(()=>[e("div",vn,[e("div",hn,[n[29]||(n[29]=e("img",{src:Yo,alt:""},null,-1)),e("div",null,i(t.$t("您将使用TON购买（超级孵化器），购买后获得永久免除所有宠物蛋孵化时间权益",[o.config[o.configKey[0]]])),1)]),e("div",wn,[e("button",{onClick:n[20]||(n[20]=s=>o.showSuper=!1)},i(t.$t("取消")),1),e("button",{onClick:n[21]||(n[21]=s=>o.toBuy(2))},i(t.$t("购买")),1)])])]),_:1},8,["show"]),g(v,{show:o.showTimes,"onUpdate:show":n[25]||(n[25]=s=>o.showTimes=s),round:""},{default:C(()=>[e("div",yn,[e("div",Cn,[n[30]||(n[30]=e("img",{src:Ao,alt:""},null,-1)),e("div",null,i(t.$t("您将使用TON购买（暴击孵化），购买后获得永久孵化次数次",[o.config[o.configKey[1]],o.config[o.configKey[2]]])),1)]),e("div",kn,[e("button",{onClick:n[23]||(n[23]=s=>o.showTimes=!1)},i(t.$t("取消")),1),e("button",{onClick:n[24]||(n[24]=s=>o.toBuy(1))},i(t.$t("购买")),1)])])]),_:1},8,["show"]),g(v,{show:o.showGif,"onUpdate:show":n[26]||(n[26]=s=>o.showGif=s),round:""},{default:C(()=>[o.showGif?(l(),c("img",Sn)):go("",!0)]),_:1},8,["show"]),g(v,{show:o.showPet,"onUpdate:show":n[27]||(n[27]=s=>o.showPet=s),round:""},{default:C(()=>[e("img",{class:vo(["gif petImg",{petImg1:o.showScale}]),src:o.petUrl,alt:""},null,10,_n)]),_:1},8,["show"])])}const Ln=ro(Jo,[["render",bn],["__scopeId","data-v-ef9b5f25"]]);export{Ln as default};
