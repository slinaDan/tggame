import{N as Z}from"./NavBar-wOX7PC5X.js";import{M as Q}from"./MyTabbar-aoP1MzMM.js";import{p as S,c as M,m as $,a as oo,t as E,d as F,u as no,b as G,w as to,e as eo,f as p,g as W,n as D,h as so,_ as io,P as H,r as f,i as lo,j as ao,k as ro,o as co,l as b,q as r,s as d,v as I,x as y,S as V,y as e,z as i,A as mo,B as uo,C as go,D as fo}from"./index-l-J8Cx1Z.js";import{g as po,a as vo,h as ho,b as wo,p as Co}from"./api-REcrZpJX.js";import{_ as yo}from"./one-CXrO1K9a.js";import"./use-placeholder-aBHGaMwr.js";function ko(t,o){const{days:h}=o;let{hours:n,minutes:c,seconds:u,milliseconds:m}=o;if(t.includes("DD")?t=t.replace("DD",S(h)):n+=h*24,t.includes("HH")?t=t.replace("HH",S(n)):c+=n*60,t.includes("mm")?t=t.replace("mm",S(c)):u+=c*60,t.includes("ss")?t=t.replace("ss",S(u)):m+=u*1e3,t.includes("S")){const a=S(m,3);t.includes("SSS")?t=t.replace("SSS",a):t.includes("SS")?t=t.replace("SS",a.slice(0,2)):t=t.replace("S",a.charAt(0))}return t}const[_o,So]=M("count-down"),bo={time:$(0),format:oo("HH:mm:ss"),autoStart:E,millisecond:Boolean};var Uo=F({name:_o,props:bo,emits:["change","finish"],setup(t,{emit:o,slots:h}){const{start:n,pause:c,reset:u,current:m}=no({time:+t.time,millisecond:t.millisecond,onChange:_=>o("change",_),onFinish:()=>o("finish")}),a=G(()=>ko(t.format,m.value)),w=()=>{u(+t.time),t.autoStart&&n()};return to(()=>t.time,w,{immediate:!0}),eo({start:n,pause:c,reset:w}),()=>p("div",{role:"timer",class:So()},[h.default?h.default(m.value):a.value])}});const z=W(Uo),[To,N]=M("progress"),Po={color:String,inactive:Boolean,pivotText:String,textColor:String,showPivot:E,pivotColor:String,trackColor:String,strokeWidth:D,percentage:{type:D,default:0,validator:t=>+t>=0&&+t<=100}};var No=F({name:To,props:Po,setup(t){const o=G(()=>t.inactive?void 0:t.color),h=()=>{const{textColor:n,pivotText:c,pivotColor:u,percentage:m}=t,a=c??`${m}%`;if(t.showPivot&&a){const w={color:n,left:`${+m}%`,transform:`translate(-${+m}%,-50%)`,background:u||o.value};return p("span",{style:w,class:N("pivot",{inactive:t.inactive})},[a])}};return()=>{const{trackColor:n,percentage:c,strokeWidth:u}=t,m={background:n,height:so(u)},a={width:`${c}%`,background:o.value};return p("div",{class:N(),style:m},[p("span",{class:N("portion",{inactive:t.inactive}),style:a},null),h()])}}});const K=W(No),Ro=""+new URL("icon11-BP-IXX_4.png",import.meta.url).href,Bo=""+new URL("icon1-CabFUzrM.png",import.meta.url).href,Lo=""+new URL("icon33-B49QxJFE.png",import.meta.url).href,xo=""+new URL("icon3-E4ShYdK9.png",import.meta.url).href,jo=""+new URL("icon5-ByR6CkOw.png",import.meta.url).href,Do=""+new URL("icon7-BRWn4_Px.png",import.meta.url).href,Ho=""+new URL("icon22-Bs8myrgK.png",import.meta.url).href,Io=""+new URL("icon2-Vz8uxzxC.png",import.meta.url).href,Vo=""+new URL("icon44-D8HKDqdz.png",import.meta.url).href,zo=""+new URL("icon4-I2gNfyMN.png",import.meta.url).href,Ko=""+new URL("icon66-CSzElCyg.png",import.meta.url).href,Mo=""+new URL("icon6-Chp2E9-W.png",import.meta.url).href,Eo=""+new URL("egg-CvBl--JO.png",import.meta.url).href,Fo=""+new URL("../imgs/hand.png",import.meta.url).href,Go=""+new URL("super-D-gdSZbi.png",import.meta.url).href,Wo=""+new URL("times-CYYbz3ww.png",import.meta.url).href,Oo={components:{NavbarVue:Z,MyTabbarVue:Q,[H.name]:H,[K.name]:K,[z.name]:z},setup(){let t=f(!1),o=f(!1),h=f(!1),n=f(!1),c=f(!1),u=f(!1);const m=lo(),a=f(!1),w=f(0),_=localStorage.token;let v=["app:superhatch:amount","app:hatchnum:amount","app:hatchnum:num","app:ton:address"];const s=f({}),k=f({}),R=f(0),B=f(0),T=f(""),[L]=ao(),{locale:x}=ro();async function P(){try{const l=await vo(),g=await ho();if(console.log(l),l.code==200&&(s.value=l.data),g.code==200){R.value=g.data.hatching?g.data.hatching.remainingSecond:0,B.value=g.data.hatching?g.data.hatching.totalSecond:1,a.value=g.data.hatching!=null;let C=g.data.showTipList;C.length&&C[0].status==1&&C[0].showTip==0&&(T.value=C[0].pet.image,j())}}catch(l){console.error("失败:",l)}}co(()=>{_&&(P(),O())});function j(){u.value=!1,n.value=!0,setTimeout(()=>{n.value=!1},900),setTimeout(()=>{c.value=!0,setTimeout(()=>{u.value=!0,setTimeout(()=>{c.value=!1},700)},100)},700)}async function O(){const l=await po(v);l.code==200&&(k.value=l.data)}function A(){Number(s.value.hatchTodayNum)+Number(s.value.hatchPerpetualNum)>0?t.value=!0:mo(x.value=="en"?"Currently, there are no incubation attempts available":"当前暂无孵化次数")}function Y(l){m.push(l)}async function q(){t.value=!1;const l=await wo();l.code==200&&(P(),s.value.superHatch==1?(T.value=l.data.pet.image,j()):a.value=!0)}async function J(l){o.value=!1,h.value=!1;let g=l==1?k.value[v[1]]*1e9:k.value[v[0]]*1e9;console.log(k.value[v[3]],g.toString());const C={validUntil:Math.floor(Date.now()/1e3)+60,messages:[{address:k.value[v[3]],amount:g.toString()}]};console.log(C,L);try{const U=await L.sendTransaction(C);X(l),console.log(111111,U)}catch(U){console.log(U,typeof U)}}async function X(l){const g=await Co({type:l});g.code==200&&(uo(g.msg),P())}return{showCenter:t,showSuper:o,showTimes:h,showGif:n,jumpto:Y,inProgress:a,active:w,locale:x,onConfirm:q,userInfo:s,config:k,configKey:v,remainingSecond:R,toHatch:A,toBuy:J,totalSecond:B,showPet:c,showScale:u,petUrl:T}}},Ao={class:"page"},Yo={class:"iconWrap"},qo={class:"flex-bw"},Jo={class:"flex1"},Xo={class:"flex1"},Zo={class:"flex-bw btns"},Qo={class:"flex"},$o={class:"fs-16"},on={class:"flex"},nn={class:"fs-16"},tn=["src"],en={class:"wrap flex1"},sn={class:"income flex"},ln={class:"yellow"},an={key:0,class:"flex buttons"},rn={key:1,class:"flex progress"},cn={class:"van_progress"},mn={class:"countdown flex"},un={class:"modal flex1"},dn={class:"flex"},gn={class:"modal modal1 flex1"},fn={class:"flex1"},pn={class:"flex"},vn={class:"modal modal1 flex1"},hn={class:"flex1"},wn={class:"flex"},Cn={key:0,class:"gif",src:yo,alt:""},yn=["src"];function kn(t,o,h,n,c,u){const m=b("NavbarVue"),a=b("MyTabbarVue"),w=b("van-progress"),_=b("van-count-down"),v=b("van-popup");return r(),d("div",Ao,[(r(),I(V,null,{default:y(()=>[p(m)]),_:1})),(r(),I(V,null,{default:y(()=>[p(a,{active:n.active},null,8,["active"])]),_:1})),e("div",Yo,[e("div",qo,[e("div",Jo,[n.locale=="en"?(r(),d("img",{key:0,class:"icons",onClick:o[0]||(o[0]=s=>n.jumpto("/synthesis")),src:Ro,alt:""})):(r(),d("img",{key:1,class:"icons",onClick:o[1]||(o[1]=s=>n.jumpto("/synthesis")),src:Bo,alt:""})),n.locale=="en"?(r(),d("img",{key:2,class:"icons",onClick:o[2]||(o[2]=s=>n.jumpto("/myPet")),src:Lo,alt:""})):(r(),d("img",{key:3,class:"icons",onClick:o[3]||(o[3]=s=>n.jumpto("/myPet")),src:xo,alt:""})),e("img",{class:"icons",onClick:o[4]||(o[4]=s=>n.jumpto("/kong")),src:jo,alt:""}),e("img",{class:"icons",onClick:o[5]||(o[5]=s=>n.jumpto("/ranking")),src:Do,alt:""})]),e("div",Xo,[n.locale=="en"?(r(),d("img",{key:0,class:"icons",onClick:o[6]||(o[6]=s=>n.jumpto("/getHelp")),src:Ho,alt:""})):(r(),d("img",{key:1,class:"icons",onClick:o[7]||(o[7]=s=>n.jumpto("/getHelp")),src:Io,alt:""})),n.locale=="en"?(r(),d("img",{key:2,class:"icons",onClick:o[8]||(o[8]=s=>n.jumpto("/invite")),src:Vo,alt:""})):(r(),d("img",{key:3,class:"icons",onClick:o[9]||(o[9]=s=>n.jumpto("/invite")),src:zo,alt:""})),n.locale=="en"?(r(),d("img",{key:4,class:"icons",onClick:o[10]||(o[10]=s=>n.jumpto("/airdrop")),src:Ko,alt:""})):(r(),d("img",{key:5,class:"icons",onClick:o[11]||(o[11]=s=>n.jumpto("/airdrop")),src:Mo,alt:""}))])]),e("div",Zo,[e("button",Qo,[e("span",null,i(t.$t("今日孵化"))+"：",1),e("span",$o,i(n.userInfo.hatchTodayNum)+i(t.$t("次")),1)]),e("button",on,[e("span",null,i(t.$t("永久孵化"))+"：",1),e("span",nn,i(n.userInfo.hatchPerpetualNum)+i(t.$t("次")),1)])]),e("img",{onClick:o[12]||(o[12]=s=>n.showSuper=!0),class:"super",src:"/public/imgs/icon"+(n.locale=="en"?88:8)+".png",alt:""},null,8,tn)]),e("div",en,[o[27]||(o[27]=e("img",{class:"egg",src:Eo,alt:""},null,-1)),e("div",sn,[e("span",null,i(t.$t("我的收益"))+"：",1),e("span",ln,i(n.userInfo.earning)+"/h",1)]),n.inProgress?(r(),d("div",rn,[e("span",null,i(t.$t("孵化进度")),1),e("div",cn,[p(w,{percentage:(1-n.remainingSecond/n.totalSecond)*100,color:"#F5BB30","show-pivot":!1,"track-color":"#413E5A"},null,8,["percentage"]),e("div",mn,[p(_,{time:n.remainingSecond*1e3,format:"mm"+t.$t("分")+"ss"+t.$t("秒")},null,8,["time","format"])])]),e("img",{onClick:o[15]||(o[15]=s=>n.jumpto("/getHelp")),src:Fo,alt:""})])):(r(),d("div",an,[e("button",{onClick:o[13]||(o[13]=(...s)=>n.toHatch&&n.toHatch(...s))},i(t.$t("孵化")),1),e("button",{onClick:o[14]||(o[14]=s=>n.showTimes=!0)},i(t.$t("暴击孵化次数")),1)]))]),p(v,{show:n.showCenter,"onUpdate:show":o[18]||(o[18]=s=>n.showCenter=s),round:""},{default:y(()=>[e("div",un,[e("div",null,i(t.$t("是否确认进行孵化操作"))+"？",1),e("div",dn,[e("button",{onClick:o[16]||(o[16]=s=>n.showCenter=!1)},i(t.$t("取消")),1),e("button",{onClick:o[17]||(o[17]=(...s)=>n.onConfirm&&n.onConfirm(...s))},i(t.$t("确定")),1)])])]),_:1},8,["show"]),p(v,{show:n.showSuper,"onUpdate:show":o[21]||(o[21]=s=>n.showSuper=s),round:""},{default:y(()=>[e("div",gn,[e("div",fn,[o[28]||(o[28]=e("img",{src:Go,alt:""},null,-1)),e("div",null,i(t.$t("您将使用TON购买（超级孵化器），购买后获得永久免除所有宠物蛋孵化时间权益",[n.config[n.configKey[0]]])),1)]),e("div",pn,[e("button",{onClick:o[19]||(o[19]=s=>n.showSuper=!1)},i(t.$t("取消")),1),e("button",{onClick:o[20]||(o[20]=s=>n.toBuy(2))},i(t.$t("购买")),1)])])]),_:1},8,["show"]),p(v,{show:n.showTimes,"onUpdate:show":o[24]||(o[24]=s=>n.showTimes=s),round:""},{default:y(()=>[e("div",vn,[e("div",hn,[o[29]||(o[29]=e("img",{src:Wo,alt:""},null,-1)),e("div",null,i(t.$t("您将使用TON购买（暴击孵化），购买后获得永久孵化次数次",[n.config[n.configKey[1]],n.config[n.configKey[2]]])),1)]),e("div",wn,[e("button",{onClick:o[22]||(o[22]=s=>n.showTimes=!1)},i(t.$t("取消")),1),e("button",{onClick:o[23]||(o[23]=s=>n.toBuy(1))},i(t.$t("购买")),1)])])]),_:1},8,["show"]),p(v,{show:n.showGif,"onUpdate:show":o[25]||(o[25]=s=>n.showGif=s),round:""},{default:y(()=>[n.showGif?(r(),d("img",Cn)):go("",!0)]),_:1},8,["show"]),p(v,{show:n.showPet,"onUpdate:show":o[26]||(o[26]=s=>n.showPet=s),round:""},{default:y(()=>[e("img",{class:fo(["gif petImg",{petImg1:n.showScale}]),src:n.petUrl,alt:""},null,10,yn)]),_:1},8,["show"])])}const Nn=io(Oo,[["render",kn],["__scopeId","data-v-dcc09c13"]]);export{Nn as default};
