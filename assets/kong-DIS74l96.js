import{N as K,c as O}from"./NavBar-OK_U4UO8.js";import{_ as R,I as b,i as T,r as v,o as B,l as k,q as c,s as r,v as w,x as L,S as x,y as n,f as N,z as a,H as A,J as E,A as h,C as H}from"./index-CThFJ6vP.js";import{k as M,a as $,e as z,r as D}from"./api-BVq_wGQT.js";import{E as C}from"./index-DuXN0fhS.js";const U=""+new URL("../imgs/kong.png",import.meta.url).href,q={components:{NavbarVue:K,[C.name]:C,[b.name]:b},setup(){const l=T(),o=v([]),_=v({}),t=v([]),f=v(1),p=v(0);async function d(){const e=await M(f.value);if(e.code==200){p.value=e.total,f.value==1&&(o.value=[]);for(var i=0;i<e.rows.length;i++)for(var u=0;u<t.value.length;u++)e.rows[i].type==t.value[u].dictValue&&(e.rows[i].typeTitle=t.value[u].dictLabel);o.value=o.value.concat(...e.rows),console.log(o.value)}}async function m(){const e=await $();e.code==200&&(_.value=e.data)}async function g(){const e=await z("sys_kong_type");e.code==200&&(t.value=e.data)}async function s(){const e=await D();e.code==200&&(H(e.msg),d(),m())}function y(e){const i=e.target;if(i){const{scrollTop:u,scrollHeight:G,clientHeight:I}=i;u+I>=G&&(console.log("已经滚动到底部",p.value,o.value.length),p.value>o.value.length&&(f.value+=1,d()))}}function S(){l.back()}B(async()=>{await g(),d(),m()});function V(e){l.push(e)}return{copy:O,jumpto:V,list:o,credit:_,typeInfo:t,handleScroll:y,toReceive:s,toback:S}}},F={class:"wrap flex1"},J={class:"amount"},W={class:"flex"},P={class:"yellow"},Q={class:"detailWrap"},X={class:"title flex"},Y={class:"flex1"},Z={class:"balance"},j={class:"flex1 flex-end"},ee={key:0,class:"fs-16 yellow"},oe={key:1,class:"fs-16 blue"},se={key:2,class:"balance num"},te={key:3,class:"balance num"};function ae(l,o,_,t,f,p){const d=k("NavbarVue"),m=k("van-icon"),g=k("van-empty");return c(),r("div",{class:"page",ref:"scrollContainer",onScroll:o[3]||(o[3]=(...s)=>t.handleScroll&&t.handleScroll(...s))},[(c(),w(x,null,{default:L(()=>[N(d)]),_:1})),n("div",{class:"goback",onClick:o[0]||(o[0]=(...s)=>t.toback&&t.toback(...s))},[N(m,{name:"arrow-left",size:"20"})]),n("div",F,[o[4]||(o[4]=n("img",{src:U,alt:""},null,-1)),n("span",J,a(t.credit.noClaimAmount),1),n("button",{onClick:o[1]||(o[1]=(...s)=>t.toReceive&&t.toReceive(...s))},a(l.$t("立即领取")),1),n("div",W,[n("span",null,a(l.$t("KONG余额"))+"：",1),n("span",P,a(t.credit.kongAmount),1)]),n("div",{class:"rule flex",onClick:o[2]||(o[2]=s=>t.jumpto("/rule"))},a(l.$t("KONG规则")),1)]),n("div",Q,[n("div",X,a(l.$t("KONG明细")),1),(c(!0),r(A,null,E(t.list,(s,y)=>(c(),r("div",{class:"detailRow flex-bw",key:y},[n("div",Y,[n("span",null,a(l.$t("类型"))+"："+a(s.typeTitle),1),n("span",Z,a(l.$t("KONG余额"))+"："+a(s.actualAmount),1)]),n("div",j,[s.changeType==1?(c(),r("span",ee," KONG：+"+a(s.amount),1)):(c(),r("span",oe," KONG：-"+a(s.amount),1)),s.inviteMemberId?(c(),r("span",se,a(l.$t("好友uid"))+"："+a(s.inviteMemberId),1)):h("",!0),s.petNo?(c(),r("span",te,a(l.$t("宠物编号"))+"："+a(s.petNo),1)):h("",!0)])]))),128)),t.list.length==0?(c(),w(g,{key:0,description:l.$t("暂无数据")},null,8,["description"])):h("",!0)])],544)}const re=R(q,[["render",ae],["__scopeId","data-v-4c2b4626"]]);export{re as default};
