import{N as Q}from"./NavBar-BfTgkDUD.js";import{M as X}from"./MyTabbar-CIWh_p5f.js";import{p as S,c as K,m as $,a as oo,t as F,d as O,u as so,b as W,w as no,e as eo,f as g,g as z,n as j,h as to,_ as lo,P as R,r as m,i as ao,j as io,k as ro,o as co,l as y,q as C,s as T,v as V,x as w,S as L,y as e,z as l,A as uo,B as mo,C as go,D as fo}from"./index-CQ3tacxD.js";import{g as vo,a as ho,h as po,b as wo,p as _o}from"./api-B4am0zsO.js";import{_ as Co}from"./one-CXrO1K9a.js";import"./use-placeholder-82hqpu4J.js";function bo(s,n){const{days:v}=n;let{hours:o,minutes:r,seconds:u,milliseconds:c}=n;if(s.includes("DD")?s=s.replace("DD",S(v)):o+=v*24,s.includes("HH")?s=s.replace("HH",S(o)):r+=o*60,s.includes("mm")?s=s.replace("mm",S(r)):u+=r*60,s.includes("ss")?s=s.replace("ss",S(u)):c+=u*1e3,s.includes("S")){const i=S(c,3);s.includes("SSS")?s=s.replace("SSS",i):s.includes("SS")?s=s.replace("SS",i.slice(0,2)):s=s.replace("S",i.charAt(0))}return s}const[So,yo]=K("count-down"),ko={time:$(0),format:oo("HH:mm:ss"),autoStart:F,millisecond:Boolean};var To=O({name:So,props:ko,emits:["change","finish"],setup(s,{emit:n,slots:v}){const{start:o,pause:r,reset:u,current:c}=so({time:+s.time,millisecond:s.millisecond,onChange:b=>n("change",b),onFinish:()=>n("finish")}),i=W(()=>bo(s.format,c.value)),h=()=>{u(+s.time),s.autoStart&&o()};return no(()=>s.time,h,{immediate:!0}),eo({start:o,pause:r,reset:h}),()=>g("div",{role:"timer",class:yo()},[v.default?v.default(c.value):i.value])}});const M=z(To),[Po,N]=K("progress"),Uo={color:String,inactive:Boolean,pivotText:String,textColor:String,showPivot:F,pivotColor:String,trackColor:String,strokeWidth:j,percentage:{type:j,default:0,validator:s=>+s>=0&&+s<=100}};var No=O({name:Po,props:Uo,setup(s){const n=W(()=>s.inactive?void 0:s.color),v=()=>{const{textColor:o,pivotText:r,pivotColor:u,percentage:c}=s,i=r??`${c}%`;if(s.showPivot&&i){const h={color:o,left:`${+c}%`,transform:`translate(-${+c}%,-50%)`,background:u||n.value};return g("span",{style:h,class:N("pivot",{inactive:s.inactive})},[i])}};return()=>{const{trackColor:o,percentage:r,strokeWidth:u}=s,c={background:o,height:to(u)},i={width:`${r}%`,background:n.value};return g("div",{class:N(),style:c},[g("span",{class:N("portion",{inactive:s.inactive}),style:i},null),v()])}}});const G=z(No),Bo=""+new URL("icon5-ByR6CkOw.png",import.meta.url).href,xo=""+new URL("icon7-BRWn4_Px.png",import.meta.url).href,Do=""+new URL("egg-CvBl--JO.png",import.meta.url).href,Ho=""+new URL("../imgs/hand.png",import.meta.url).href,Io=""+new URL("super-D-gdSZbi.png",import.meta.url).href,jo=""+new URL("times-CYYbz3ww.png",import.meta.url).href,Ro={components:{NavbarVue:Q,MyTabbarVue:X,[R.name]:R,[G.name]:G,[M.name]:M},setup(){let s=m(!1),n=m(!1),v=m(!1),o=m(!1),r=m(!1),u=m(!1);const c=ao(),i=m(!1),h=m(0),b=localStorage.token;let f=["app:superhatch:amount","app:hatchnum:amount","app:hatchnum:num","app:ton:address"];const t=m({}),_=m({}),B=m(0),x=m(0),P=m(""),[D]=io(),{locale:H}=ro();async function U(){try{const a=await ho(),d=await po();if(console.log(a),a.code==200&&(t.value=a.data),d.code==200){B.value=d.data.hatching?d.data.hatching.remainingSecond:0,x.value=d.data.hatching?d.data.hatching.totalSecond:1,i.value=d.data.hatching!=null;let p=d.data.showTipList;p.length&&p[0].status==1&&p[0].showTip==0&&(P.value=p[0].pet.image,I())}}catch(a){console.error("失败:",a)}}co(()=>{b&&(U(),A())});function I(){u.value=!1,o.value=!0,setTimeout(()=>{o.value=!1},900),setTimeout(()=>{r.value=!0,setTimeout(()=>{u.value=!0,setTimeout(()=>{r.value=!1},700)},100)},700)}async function A(){const a=await vo(f);a.code==200&&(_.value=a.data)}function E(){Number(t.value.hatchTodayNum)+Number(t.value.hatchPerpetualNum)>0?s.value=!0:uo(H.value=="en"?"Currently, there are no incubation attempts available":"当前暂无孵化次数")}function Y(a){c.push(a)}async function Z(){s.value=!1;const a=await wo();a.code==200&&(U(),t.value.superHatch==1?(P.value=a.data.pet.image,I()):i.value=!0)}async function q(a){n.value=!1,v.value=!1;let d=a==1?_.value[f[1]]*1e9:_.value[f[0]]*1e9;console.log(_.value[f[3]],d.toString());const p={validUntil:Math.floor(Date.now()/1e3)+60,messages:[{address:_.value[f[3]],amount:d.toString()}]};console.log(p,D);try{const k=await D.sendTransaction(p);J(a),console.log(111111,k)}catch(k){console.log(k,typeof k)}}async function J(a){const d=await _o({type:a});d.code==200&&(mo(d.msg),U())}return{showCenter:s,showSuper:n,showTimes:v,showGif:o,jumpto:Y,inProgress:i,active:h,locale:H,onConfirm:Z,userInfo:t,config:_,configKey:f,remainingSecond:B,toHatch:E,toBuy:q,totalSecond:x,showPet:r,showScale:u,petUrl:P}}},Vo={class:"page"},Lo={class:"iconWrap"},Mo={class:"flex-bw"},Go={class:"flex1"},Ko=["src"],Fo=["src"],Oo={class:"flex1"},Wo=["src"],zo=["src"],Ao=["src"],Eo={class:"flex-bw btns"},Yo={class:"flex"},Zo={class:"fs-16"},qo={class:"flex"},Jo={class:"fs-16"},Qo=["src"],Xo={class:"wrap flex1"},$o={class:"income flex"},os={class:"yellow"},ss={key:0,class:"flex buttons"},ns={key:1,class:"flex progress"},es={class:"van_progress"},ts={class:"countdown flex"},ls={class:"modal flex1"},as={class:"flex"},is={class:"modal modal1 flex1"},rs={class:"flex1"},cs={class:"flex"},us={class:"modal modal1 flex1"},ds={class:"flex1"},ms={class:"flex"},gs={key:0,class:"gif",src:Co,alt:""},fs=["src"];function vs(s,n,v,o,r,u){const c=y("NavbarVue"),i=y("MyTabbarVue"),h=y("van-progress"),b=y("van-count-down"),f=y("van-popup");return C(),T("div",Vo,[(C(),V(L,null,{default:w(()=>[g(c)]),_:1})),(C(),V(L,null,{default:w(()=>[g(i,{active:o.active},null,8,["active"])]),_:1})),e("div",Lo,[e("div",Mo,[e("div",Go,[e("img",{class:"icons",onClick:n[0]||(n[0]=t=>o.jumpto("/synthesis")),src:"/public/imgs/icon"+(o.locale=="en"?11:1)+".png",alt:""},null,8,Ko),e("img",{class:"icons",onClick:n[1]||(n[1]=t=>o.jumpto("/myPet")),src:"/public/imgs/icon"+(o.locale=="en"?33:3)+".png",alt:""},null,8,Fo),e("img",{class:"icons",onClick:n[2]||(n[2]=t=>o.jumpto("/kong")),src:Bo,alt:""}),e("img",{class:"icons",onClick:n[3]||(n[3]=t=>o.jumpto("/ranking")),src:xo,alt:""})]),e("div",Oo,[e("img",{class:"icons",onClick:n[4]||(n[4]=t=>o.jumpto("/getHelp")),src:"/public/imgs/icon"+(o.locale=="en"?22:2)+".png",alt:""},null,8,Wo),e("img",{class:"icons",onClick:n[5]||(n[5]=t=>o.jumpto("/invite")),src:"/public/imgs/icon"+(o.locale=="en"?44:4)+".png",alt:""},null,8,zo),e("img",{class:"icons",onClick:n[6]||(n[6]=t=>o.jumpto("/airdrop")),src:"/public/imgs/icon"+(o.locale=="en"?66:6)+".png",alt:""},null,8,Ao)])]),e("div",Eo,[e("button",Yo,[e("span",null,l(s.$t("今日孵化"))+"：",1),e("span",Zo,l(o.userInfo.hatchTodayNum)+l(s.$t("次")),1)]),e("button",qo,[e("span",null,l(s.$t("永久孵化"))+"：",1),e("span",Jo,l(o.userInfo.hatchPerpetualNum)+l(s.$t("次")),1)])]),e("img",{onClick:n[7]||(n[7]=t=>o.showSuper=!0),class:"super",src:"/public/imgs/icon"+(o.locale=="en"?88:8)+".png",alt:""},null,8,Qo)]),e("div",Xo,[n[22]||(n[22]=e("img",{class:"egg",src:Do,alt:""},null,-1)),e("div",$o,[e("span",null,l(s.$t("我的收益"))+"：",1),e("span",os,l(o.userInfo.earning)+"/h",1)]),o.inProgress?(C(),T("div",ns,[e("span",null,l(s.$t("孵化进度")),1),e("div",es,[g(h,{percentage:(1-o.remainingSecond/o.totalSecond)*100,color:"#F5BB30","show-pivot":!1,"track-color":"#413E5A"},null,8,["percentage"]),e("div",ts,[g(b,{time:o.remainingSecond*1e3,format:"mm"+s.$t("分")+"ss"+s.$t("秒")},null,8,["time","format"])])]),e("img",{onClick:n[10]||(n[10]=t=>o.jumpto("/getHelp")),src:Ho,alt:""})])):(C(),T("div",ss,[e("button",{onClick:n[8]||(n[8]=(...t)=>o.toHatch&&o.toHatch(...t))},l(s.$t("孵化")),1),e("button",{onClick:n[9]||(n[9]=t=>o.showTimes=!0)},l(s.$t("暴击孵化次数")),1)]))]),g(f,{show:o.showCenter,"onUpdate:show":n[13]||(n[13]=t=>o.showCenter=t),round:""},{default:w(()=>[e("div",ls,[e("div",null,l(s.$t("是否确认进行孵化操作"))+"？",1),e("div",as,[e("button",{onClick:n[11]||(n[11]=t=>o.showCenter=!1)},l(s.$t("取消")),1),e("button",{onClick:n[12]||(n[12]=(...t)=>o.onConfirm&&o.onConfirm(...t))},l(s.$t("确定")),1)])])]),_:1},8,["show"]),g(f,{show:o.showSuper,"onUpdate:show":n[16]||(n[16]=t=>o.showSuper=t),round:""},{default:w(()=>[e("div",is,[e("div",rs,[n[23]||(n[23]=e("img",{src:Io,alt:""},null,-1)),e("div",null,l(s.$t("您将使用TON购买（超级孵化器），购买后获得永久免除所有宠物蛋孵化时间权益",[o.config[o.configKey[0]]])),1)]),e("div",cs,[e("button",{onClick:n[14]||(n[14]=t=>o.showSuper=!1)},l(s.$t("取消")),1),e("button",{onClick:n[15]||(n[15]=t=>o.toBuy(2))},l(s.$t("购买")),1)])])]),_:1},8,["show"]),g(f,{show:o.showTimes,"onUpdate:show":n[19]||(n[19]=t=>o.showTimes=t),round:""},{default:w(()=>[e("div",us,[e("div",ds,[n[24]||(n[24]=e("img",{src:jo,alt:""},null,-1)),e("div",null,l(s.$t("您将使用TON购买（暴击孵化），购买后获得永久孵化次数次",[o.config[o.configKey[1]],o.config[o.configKey[2]]])),1)]),e("div",ms,[e("button",{onClick:n[17]||(n[17]=t=>o.showTimes=!1)},l(s.$t("取消")),1),e("button",{onClick:n[18]||(n[18]=t=>o.toBuy(1))},l(s.$t("购买")),1)])])]),_:1},8,["show"]),g(f,{show:o.showGif,"onUpdate:show":n[20]||(n[20]=t=>o.showGif=t),round:""},{default:w(()=>[o.showGif?(C(),T("img",gs)):go("",!0)]),_:1},8,["show"]),g(f,{show:o.showPet,"onUpdate:show":n[21]||(n[21]=t=>o.showPet=t),round:""},{default:w(()=>[e("img",{class:fo(["gif petImg",{petImg1:o.showScale}]),src:o.petUrl,alt:""},null,10,fs)]),_:1},8,["show"])])}const Ss=lo(Ro,[["render",vs],["__scopeId","data-v-6241b3d0"]]);export{Ss as default};
