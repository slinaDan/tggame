import{N as V,c as G}from"./NavBar-B_JY-XEw.js";import{_ as K,i as O,r as p,o as R,l as h,q as c,s as r,v as k,x as T,S as B,y as n,z as o,H as I,I as L,A as y,C as $,f as x}from"./index-ClPHJh0a.js";import{k as A,a as E,e as H,r as M}from"./api-D9jvAFlf.js";import{E as w}from"./index-CX4kjn0m.js";const D=""+new URL("../imgs/kong.png",import.meta.url).href,U={components:{NavbarVue:V,[w.name]:w},setup(){const l=O(),s=p([]),_=p({}),a=p([]),f=p(1),v=p(0);async function d(){const e=await A(f.value);if(e.code==200){v.value=e.total,f.value==1&&(s.value=[]);for(var i=0;i<e.rows.length;i++)for(var u=0;u<a.value.length;u++)e.rows[i].type==a.value[u].dictValue&&(e.rows[i].typeTitle=a.value[u].dictLabel);s.value=s.value.concat(...e.rows),console.log(s.value)}}async function m(){const e=await E();e.code==200&&(_.value=e.data)}async function t(){const e=await H("sys_kong_type");e.code==200&&(a.value=e.data)}async function g(){const e=await M();e.code==200&&($(e.msg),d(),m())}function N(e){const i=e.target;if(i){const{scrollTop:u,scrollHeight:C,clientHeight:S}=i;u+S>=C&&(console.log("已经滚动到底部",v.value,s.value.length),v.value>s.value.length&&(f.value+=1,d()))}}R(async()=>{await t(),d(),m()});function b(e){l.push(e)}return{copy:G,jumpto:b,list:s,credit:_,typeInfo:a,handleScroll:N,toReceive:g}}},q={class:"wrap flex1"},z={class:"amount"},F={class:"flex"},W={class:"yellow"},J={class:"detailWrap"},P={class:"title flex"},Q={class:"flex1"},X={class:"balance"},Y={class:"flex1 flex-end"},Z={key:0,class:"fs-16 yellow"},j={key:1,class:"fs-16 blue"},ee={key:2,class:"balance num"},se={key:3,class:"balance num"};function te(l,s,_,a,f,v){const d=h("NavbarVue"),m=h("van-empty");return c(),r("div",{class:"page",ref:"scrollContainer",onScroll:s[2]||(s[2]=(...t)=>a.handleScroll&&a.handleScroll(...t))},[(c(),k(B,null,{default:T(()=>[x(d)]),_:1})),n("div",q,[s[3]||(s[3]=n("img",{src:D,alt:""},null,-1)),n("span",z,o(a.credit.noClaimAmount),1),n("button",{onClick:s[0]||(s[0]=(...t)=>a.toReceive&&a.toReceive(...t))},o(l.$t("立即领取")),1),n("div",F,[n("span",null,o(l.$t("KONG余额"))+"：",1),n("span",W,o(a.credit.kongAmount),1)]),n("div",{class:"rule flex",onClick:s[1]||(s[1]=t=>a.jumpto("/rule"))},o(l.$t("KONG规则")),1)]),n("div",J,[n("div",P,o(l.$t("KONG明细")),1),(c(!0),r(I,null,L(a.list,(t,g)=>(c(),r("div",{class:"detailRow flex-bw",key:g},[n("div",Q,[n("span",null,o(l.$t("类型"))+"："+o(t.typeTitle),1),n("span",X,o(l.$t("KONG余额"))+"："+o(t.actualAmount),1)]),n("div",Y,[t.changeType==1?(c(),r("span",Z," KONG：+"+o(t.amount),1)):(c(),r("span",j," KONG：-"+o(t.amount),1)),t.inviteMemberId?(c(),r("span",ee,o(l.$t("好友uid"))+"："+o(t.inviteMemberId),1)):y("",!0),t.petNo?(c(),r("span",se,o(l.$t("宠物编号"))+"："+o(t.petNo),1)):y("",!0)])]))),128)),a.list.length==0?(c(),k(m,{key:0,description:l.$t("暂无数据")},null,8,["description"])):y("",!0)])],544)}const ce=K(U,[["render",te],["__scopeId","data-v-d1dacfc4"]]);export{ce as default};
