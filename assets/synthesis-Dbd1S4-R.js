import{N as T}from"./NavBar-wSkkJ8dU.js";import{M as U}from"./MyTabbar-BP9JevAR.js";import{_ as K,P as C,i as O,K as S,r,k as x,o as q,l as w,q as n,s as u,v as y,x as v,S as _,y as s,z as m,A,f as g,B as V,D as B}from"./index-B691GwuT.js";import{l as j,a as L,s as M}from"./api-CjhyYONa.js";import{_ as E}from"./one-CXrO1K9a.js";import"./use-placeholder-tAUy5Gse.js";const I="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAAAmtJREFUSEu9l0GITlEUx3+nLCwtKFMslIXCTllIURYWJmaF3QhRFihFUSiKUijiq5HZYSWxsFCmzEayQlkoC8qUWczSQh3vP9339eZ9731z3nv6bn19r94953fPufec+39GYLj7CmAfsBfYDGwCVifTOeAn8B54Dbwxsz/LubVhE9x9FXAGOA3oOTIWgB5wy8zm6wxqwe4+CdxuACwzlImzZva0Cj4ATml9kKXvWCS8wJyHaQFL0r8E7O4rgedpLwM+w1O09+Nm9je3KIMV6cmgu9yJDl5kTJnZ8QGwux8CnkQ8AJ+B3YCg74CNQbsjZjatuYsRu7tK4xOwNujgepa2S8n2GnAxaKcTv8HMFnLwDeB80FjTrprZlQTW/+WmtpYO1K+GZdMFrKjXCKyO9LLBirtGLPsJge8Bp0YM7gn8Adg2YvCswNrfqtP8DXgG9Iu+sLgZM5tJh2sXoF95qNT2A1sq3s0L7BUvBFtvZuq3rUcqUwU20GSGgceG3S6R1bi7MvmjDvy7cLcW/ak7veiY6oM1XW1OEc8COyIRFOZ0qWO5+Siwrq0TIwbfF/hAugqbsLtGPC6wTpz2OSptunYutcyx/JJo1ehbXhI3MzF4IQcr2u8Nom57LaovbFWZ9hVIEnePgxutrrYzldrbmu5U5epwLv7K0mcqK/ijQXhT6dPLOmFfVpXBOmi6IiXc/+eQ2JsoCv0qeSuleadFbdct9JEEZFFhauIwQS/xJ0Ef1WFlsMpGgn5R3JXHcp8wEoHnUvTROhfwrrImUVeXhqHg3Cjpsj1p77cD6wqZ0PfRV+BL+mh7VU5rFfwfsEcEPYWugasAAAAASUVORK5CYII=",J={components:{NavbarVue:T,MyTabbarVue:U,[C.name]:C},setup(){const l=O(),t=S(),h=r(1);let e=r(!1),d=r(!1),c=r(!1);const f=r(0),p=r(0),i=r(""),o=r("");console.log(t.query.petItem),i.value=t.query.petItem?JSON.parse(t.query.petItem):"";const{locale:b}=x();i.value&&k();async function P(){const a=await L();a.code==200&&(p.value=a.data.kongAmount)}async function k(){const a=await j(Number(i.value.level)+1);a.code==200&&(f.value=a.rows[0].synthesis)}function F(){c.value=!1,e.value=!0,setTimeout(()=>{e.value=!1},900),setTimeout(()=>{d.value=!0,setTimeout(()=>{c.value=!0,setTimeout(()=>{d.value=!1},700)},100)},700)}q(()=>{P()});function G(a){l.push(a)}function N(){if(i.value)M({petId:i.value.id}).then(a=>{a.code==200&&(o.value=a.data.pet?a.data.pet.image:"",F(),setTimeout(()=>{l.push("/myPet")},2e3))});else return V(b.value=="en"?"Please add pets first":"请先添加宠物")}return{jumpto:G,active:h,showGif:e,onConfirm:N,petItem:i,kong:f,userKong:p,showPet:d,showScale:c,petUrl:o}}},Y={class:"page flex1"},R={key:0,class:"flex1 addPet"},X=["src"],Q={key:2,class:"flex adds"},W={class:"flex1 addPet"},Z=["src"],z={class:"flex1 addPet"},D=["src"],H={key:3,class:"flex adds"},$={key:4,class:"tip flex1"},ee={key:0,class:"red"},te={key:0,class:"gif",src:E,alt:""},se=["src"];function oe(l,t,h,e,d,c){const f=w("NavbarVue"),p=w("MyTabbarVue"),i=w("van-popup");return n(),u("div",Y,[(n(),y(_,null,{default:v(()=>[g(f)]),_:1})),(n(),y(_,null,{default:v(()=>[g(p,{active:e.active},null,8,["active"])]),_:1})),e.petItem?(n(),u("div",R,[s("img",{class:"petImg",src:e.petItem.image,alt:""},null,8,X)])):(n(),u("div",{key:1,class:"flex1 addPet",onClick:t[0]||(t[0]=o=>e.jumpto("/addPet"))},[t[6]||(t[6]=s("img",{src:I,alt:""},null,-1)),s("span",null,m(l.$t("添加宠物")),1)])),e.petItem?(n(),u("div",Q,[s("div",W,[s("img",{class:"petImg",src:e.petItem.image,alt:""},null,8,Z)]),s("div",z,[s("img",{class:"petImg",src:e.petItem.image,alt:""},null,8,D)])])):(n(),u("div",H,[s("div",{class:"flex1 addPet",onClick:t[1]||(t[1]=o=>e.jumpto("/addPet"))},[t[7]||(t[7]=s("img",{src:I,alt:""},null,-1)),s("span",null,m(l.$t("添加宠物")),1)]),s("div",{class:"flex1 addPet",onClick:t[2]||(t[2]=o=>e.jumpto("/addPet"))},[t[8]||(t[8]=s("img",{src:I,alt:""},null,-1)),s("span",null,m(l.$t("添加宠物")),1)])])),s("button",{onClick:t[3]||(t[3]=(...o)=>e.onConfirm&&e.onConfirm(...o))},m(l.$t("合成")),1),e.petItem?(n(),u("div",$,[s("span",null,m(l.$t("本次合成所需"))+" KONG："+m(e.kong)+" KONG",1),Number(e.userKong)<Number(e.kong)?(n(),u("span",ee,m(l.$t("KONG不足"))+"！！",1)):A("",!0)])):A("",!0),g(i,{show:e.showGif,"onUpdate:show":t[4]||(t[4]=o=>e.showGif=o),round:""},{default:v(()=>[e.showGif?(n(),u("img",te)):A("",!0)]),_:1},8,["show"]),g(i,{show:e.showPet,"onUpdate:show":t[5]||(t[5]=o=>e.showPet=o),round:""},{default:v(()=>[s("img",{class:B(["gif getpetImg",{getpetImg1:e.showScale}]),src:e.petUrl,alt:""},null,10,se)]),_:1},8,["show"])])}const me=K(J,[["render",oe],["__scopeId","data-v-7761cdb6"]]);export{me as default};
