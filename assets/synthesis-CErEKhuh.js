import{N as U}from"./NavBar-B_JY-XEw.js";import{M as K}from"./MyTabbar-BGIdZBT_.js";import{_ as O,P as h,i as x,J as N,r as i,k as S,o as q,l as w,q as l,s as u,v as C,x as g,S as y,y as s,z as m,A as _,f as v,B as V,D as B}from"./index-ClPHJh0a.js";import{d as j,a as L,s as M}from"./api-D9jvAFlf.js";import{_ as E}from"./one-CXrO1K9a.js";import"./use-placeholder-DVrY4sxw.js";const A="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAAAmtJREFUSEu9l0GITlEUx3+nLCwtKFMslIXCTllIURYWJmaF3QhRFihFUSiKUijiq5HZYSWxsFCmzEayQlkoC8qUWczSQh3vP9339eZ9731z3nv6bn19r94953fPufec+39GYLj7CmAfsBfYDGwCVifTOeAn8B54Dbwxsz/LubVhE9x9FXAGOA3oOTIWgB5wy8zm6wxqwe4+CdxuACwzlImzZva0Cj4ATml9kKXvWCS8wJyHaQFL0r8E7O4rgedpLwM+w1O09+Nm9je3KIMV6cmgu9yJDl5kTJnZ8QGwux8CnkQ8AJ+B3YCg74CNQbsjZjatuYsRu7tK4xOwNujgepa2S8n2GnAxaKcTv8HMFnLwDeB80FjTrprZlQTW/+WmtpYO1K+GZdMFrKjXCKyO9LLBirtGLPsJge8Bp0YM7gn8Adg2YvCswNrfqtP8DXgG9Iu+sLgZM5tJh2sXoF95qNT2A1sq3s0L7BUvBFtvZuq3rUcqUwU20GSGgceG3S6R1bi7MvmjDvy7cLcW/ak7veiY6oM1XW1OEc8COyIRFOZ0qWO5+Siwrq0TIwbfF/hAugqbsLtGPC6wTpz2OSptunYutcyx/JJo1ehbXhI3MzF4IQcr2u8Nom57LaovbFWZ9hVIEnePgxutrrYzldrbmu5U5epwLv7K0mcqK/ijQXhT6dPLOmFfVpXBOmi6IiXc/+eQ2JsoCv0qeSuleadFbdct9JEEZFFhauIwQS/xJ0Ef1WFlsMpGgn5R3JXHcp8wEoHnUvTROhfwrrImUVeXhqHg3Cjpsj1p77cD6wqZ0PfRV+BL+mh7VU5rFfwfsEcEPYWugasAAAAASUVORK5CYII=",J={components:{NavbarVue:U,MyTabbarVue:K,[h.name]:h},setup(){const n=x(),t=N(),I=i(1);let e=i(!1),d=i(!1),c=i(!1);const f=i(0),p=i(0),r=i(""),o=i("");console.log(t.query.petItem),r.value=t.query.petItem?JSON.parse(t.query.petItem):"";const{locale:b}=S();async function P(){const a=await j("app:synthesis:kong");a.code==200&&(f.value=a.data)}async function k(){const a=await L();a.code==200&&(p.value=a.data.kongAmount)}function F(){c.value=!1,e.value=!0,setTimeout(()=>{e.value=!1},900),setTimeout(()=>{d.value=!0,setTimeout(()=>{c.value=!0,setTimeout(()=>{d.value=!1},700)},100)},700)}q(()=>{P(),k()});function G(a){n.push(a)}function T(){if(r.value)M({petId:r.value.id}).then(a=>{a.code==200&&(o.value=a.data.pet?a.data.pet.image:"",F(),setTimeout(()=>{n.push("/myPet")},2e3))});else return V(b.value=="en"?"Please select a pet":"请选择宠物")}return{jumpto:G,active:I,showGif:e,onConfirm:T,petItem:r,kong:f,userKong:p,showPet:d,showScale:c,petUrl:o}}},Y={class:"page flex1"},R={key:0,class:"flex1 addPet"},X=["src"],Q={key:2,class:"flex adds"},W={class:"flex1 addPet"},Z=["src"],z={class:"flex1 addPet"},D=["src"],H={key:3,class:"flex adds"},$={class:"tip flex1"},ee={key:0,class:"red"},te={key:0,class:"gif",src:E,alt:""},se=["src"];function oe(n,t,I,e,d,c){const f=w("NavbarVue"),p=w("MyTabbarVue"),r=w("van-popup");return l(),u("div",Y,[(l(),C(y,null,{default:g(()=>[v(f)]),_:1})),(l(),C(y,null,{default:g(()=>[v(p,{active:e.active},null,8,["active"])]),_:1})),e.petItem?(l(),u("div",R,[s("img",{class:"petImg",src:e.petItem.image,alt:""},null,8,X)])):(l(),u("div",{key:1,class:"flex1 addPet",onClick:t[0]||(t[0]=o=>e.jumpto("/addPet"))},[t[6]||(t[6]=s("img",{src:A,alt:""},null,-1)),s("span",null,m(n.$t("添加宠物")),1)])),e.petItem?(l(),u("div",Q,[s("div",W,[s("img",{class:"petImg",src:e.petItem.image,alt:""},null,8,Z)]),s("div",z,[s("img",{class:"petImg",src:e.petItem.image,alt:""},null,8,D)])])):(l(),u("div",H,[s("div",{class:"flex1 addPet",onClick:t[1]||(t[1]=o=>e.jumpto("/addPet"))},[t[7]||(t[7]=s("img",{src:A,alt:""},null,-1)),s("span",null,m(n.$t("添加宠物")),1)]),s("div",{class:"flex1 addPet",onClick:t[2]||(t[2]=o=>e.jumpto("/addPet"))},[t[8]||(t[8]=s("img",{src:A,alt:""},null,-1)),s("span",null,m(n.$t("添加宠物")),1)])])),s("button",{onClick:t[3]||(t[3]=(...o)=>e.onConfirm&&e.onConfirm(...o))},m(n.$t("合成")),1),s("div",$,[s("span",null,m(n.$t("本次合成所需"))+" KONG："+m(e.kong)+" KONG",1),Number(e.userKong)<Number(e.kong)?(l(),u("span",ee,m(n.$t("KONG不足"))+"！！",1)):_("",!0)]),v(r,{show:e.showGif,"onUpdate:show":t[4]||(t[4]=o=>e.showGif=o),round:""},{default:g(()=>[e.showGif?(l(),u("img",te)):_("",!0)]),_:1},8,["show"]),v(r,{show:e.showPet,"onUpdate:show":t[5]||(t[5]=o=>e.showPet=o),round:""},{default:g(()=>[s("img",{class:B(["gif getpetImg",{getpetImg1:e.showScale}]),src:e.petUrl,alt:""},null,10,se)]),_:1},8,["show"])])}const me=O(J,[["render",oe],["__scopeId","data-v-3f4bf756"]]);export{me as default};
