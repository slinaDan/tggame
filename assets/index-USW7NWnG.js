import{N as to}from"./NavBar-B_JY-XEw.js";import{M as eo}from"./MyTabbar-BGIdZBT_.js";import{p as b,c as G,m as so,a as io,t as W,d as q,u as ao,b as O,w as lo,e as ro,f as p,g as Y,n as I,h as co,_ as uo,P as V,r as f,i as mo,j as fo,k as go,o as po,l as U,q as l,s as r,v as K,x as k,S as M,y as s,z as i,A as z,B as R,C as vo,D as ho}from"./index-ClPHJh0a.js";import{g as wo,a as yo,h as ko,b as Co,p as So}from"./api-D9jvAFlf.js";import{_ as _o}from"./one-CXrO1K9a.js";import"./use-placeholder-DVrY4sxw.js";function bo(t,n){const{days:h}=n;let{hours:o,minutes:u,seconds:d,milliseconds:m}=n;if(t.includes("DD")?t=t.replace("DD",b(h)):o+=h*24,t.includes("HH")?t=t.replace("HH",b(o)):u+=o*60,t.includes("mm")?t=t.replace("mm",b(u)):d+=u*60,t.includes("ss")?t=t.replace("ss",b(d)):m+=d*1e3,t.includes("S")){const c=b(m,3);t.includes("SSS")?t=t.replace("SSS",c):t.includes("SS")?t=t.replace("SS",c.slice(0,2)):t=t.replace("S",c.charAt(0))}return t}const[Uo,To]=G("count-down"),Po={time:so(0),format:io("HH:mm:ss"),autoStart:W,millisecond:Boolean};var Lo=q({name:Uo,props:Po,emits:["change","finish"],setup(t,{emit:n,slots:h}){const{start:o,pause:u,reset:d,current:m}=ao({time:+t.time,millisecond:t.millisecond,onChange:C=>n("change",C),onFinish:()=>n("finish")}),c=O(()=>bo(t.format,m.value)),w=()=>{d(+t.time),t.autoStart&&o()};return lo(()=>t.time,w,{immediate:!0}),ro({start:o,pause:u,reset:w}),()=>p("div",{role:"timer",class:To()},[h.default?h.default(m.value):c.value])}});const E=Y(Lo),[Ro,B]=G("progress"),Bo={color:String,inactive:Boolean,pivotText:String,textColor:String,showPivot:W,pivotColor:String,trackColor:String,strokeWidth:I,percentage:{type:I,default:0,validator:t=>+t>=0&&+t<=100}};var Do=q({name:Ro,props:Bo,setup(t){const n=O(()=>t.inactive?void 0:t.color),h=()=>{const{textColor:o,pivotText:u,pivotColor:d,percentage:m}=t,c=u??`${m}%`;if(t.showPivot&&c){const w={color:o,left:`${+m}%`,transform:`translate(-${+m}%,-50%)`,background:d||n.value};return p("span",{style:w,class:B("pivot",{inactive:t.inactive})},[c])}};return()=>{const{trackColor:o,percentage:u,strokeWidth:d}=t,m={background:o,height:co(d)},c={width:`${u}%`,background:n.value};return p("div",{class:B(),style:m},[p("span",{class:B("portion",{inactive:t.inactive}),style:c},null),h()])}}});const F=Y(Do),No=""+new URL("icon11-BP-IXX_4.png",import.meta.url).href,xo=""+new URL("icon1-CabFUzrM.png",import.meta.url).href,jo=""+new URL("icon33-B49QxJFE.png",import.meta.url).href,Ho=""+new URL("icon3-E4ShYdK9.png",import.meta.url).href,Io=""+new URL("icon5-ByR6CkOw.png",import.meta.url).href,Vo=""+new URL("icon7-BRWn4_Px.png",import.meta.url).href,Ko=""+new URL("icon22-Bs8myrgK.png",import.meta.url).href,Mo=""+new URL("icon2-Vz8uxzxC.png",import.meta.url).href,zo=""+new URL("icon44-D8HKDqdz.png",import.meta.url).href,Eo=""+new URL("icon4-I2gNfyMN.png",import.meta.url).href,Fo=""+new URL("icon66-CSzElCyg.png",import.meta.url).href,Go=""+new URL("icon6-Chp2E9-W.png",import.meta.url).href,Wo=""+new URL("icon88-BGqJwtDC.png",import.meta.url).href,qo=""+new URL("icon8-B35KqxTU.png",import.meta.url).href,Oo=""+new URL("egg-CvBl--JO.png",import.meta.url).href,Yo=""+new URL("../imgs/hand.png",import.meta.url).href,Ao=""+new URL("super-D-gdSZbi.png",import.meta.url).href,Jo=""+new URL("times-CYYbz3ww.png",import.meta.url).href,Xo={components:{NavbarVue:to,MyTabbarVue:eo,[V.name]:V,[F.name]:F,[E.name]:E},setup(){let t=f(!1),n=f(!1),h=f(!1),o=f(!1),u=f(!1),d=f(!1);const m=mo(),c=f(!1),w=f(0),C=f(localStorage.token);let v=["app:superhatch:amount","app:hatchnum:amount","app:hatchnum:num","app:ton:address"];const e=f({}),S=f({}),D=f(0),N=f(0),P=f(""),[x]=fo(),{locale:T}=go();async function L(){try{const a=await yo(),g=await ko();if(console.log(a),a.code==200&&(e.value=a.data),g.code==200){D.value=g.data.hatching?g.data.hatching.remainingSecond:0,N.value=g.data.hatching?g.data.hatching.totalSecond:1,c.value=g.data.hatching!=null;let _=g.data.showTipList||[];_.length&&_.forEach(y=>{y.status==1&&y.showTip==0&&(P.value=y.pet.image,H())})}}catch(a){console.error("失败:",a)}}po(()=>{C.value&&j()});function j(){console.log(222222222),L(),A()}function H(){d.value=!1,o.value=!0,setTimeout(()=>{o.value=!1},900),setTimeout(()=>{u.value=!0,setTimeout(()=>{d.value=!0,setTimeout(()=>{u.value=!1},700)},100)},700)}async function A(){const a=await wo(v);a.code==200&&(S.value=a.data)}function J(){Number(e.value.hatchTodayNum)+Number(e.value.hatchPerpetualNum)>0?t.value=!0:R(T.value=="en"?"Currently, there are no incubation attempts available":"当前暂无孵化次数")}function X(a){m.push(a)}async function Z(){t.value=!1;const a=await Co();a.code==200&&(L(),e.value.superHatch==1?(P.value=a.data.pet?a.data.pet.image:"",H()):c.value=!0)}function Q(){e.value.superHatch==0?n.value=!0:R(T.value=="en"?"You have purchased":"您已购买")}async function $(a){n.value=!1,h.value=!1;let g=a==1?S.value[v[1]]*1e9:S.value[v[0]]*1e9;console.log(S.value[v[3]],g.toString());const _={validUntil:Math.floor(Date.now()/1e3)+60,messages:[{address:S.value[v[3]],amount:g.toString()}]};console.log(_,x);try{const y=await x.sendTransaction(_);oo(a),console.log(111111,y)}catch(y){console.log(y,typeof y)}}async function oo(a){const g=await So({type:a});g.code==200&&(vo(g.msg),L())}function no(){R(T.value=="en"?"Please connect your wallet and log in first":"请先连接钱包并登录")}return{showCenter:t,showSuper:n,showTimes:h,showGif:o,jumpto:X,inProgress:c,active:w,locale:T,onConfirm:Z,userInfo:e,config:S,configKey:v,remainingSecond:D,toHatch:J,toBuy:$,totalSecond:N,showPet:u,showScale:d,petUrl:P,loadData:j,buySuper:Q,notLogin:no,token:C}}},Zo={class:"page"},Qo={class:"iconWrap"},$o={class:"flex-bw"},on={class:"flex1"},nn={class:"flex1"},tn={class:"flex-bw btns"},en={class:"flex"},sn={class:"fs-16"},an={class:"flex"},ln={class:"fs-16"},rn={class:"wrap flex1"},cn={class:"income flex"},un={class:"yellow"},mn={key:0,class:"flex buttons"},dn={key:1,class:"flex progress"},fn={class:"van_progress"},gn={class:"countdown flex"},pn={class:"modal flex1"},vn={class:"flex"},hn={class:"modal modal1 flex1"},wn={class:"flex1"},yn={class:"flex"},kn={class:"modal modal1 flex1"},Cn={class:"flex1"},Sn={class:"flex"},_n={key:0,class:"gif",src:_o,alt:""},bn=["src"];function Un(t,n,h,o,u,d){const m=U("NavbarVue"),c=U("MyTabbarVue"),w=U("van-progress"),C=U("van-count-down"),v=U("van-popup");return l(),r("div",Zo,[(l(),K(M,{onInitData:o.loadData},{default:k(()=>[p(m)]),_:1},8,["onInitData"])),(l(),K(M,null,{default:k(()=>[p(c,{active:o.active},null,8,["active"])]),_:1})),s("div",Qo,[s("div",$o,[s("div",on,[o.locale=="en"?(l(),r("img",{key:0,class:"icons",onClick:n[0]||(n[0]=e=>o.jumpto("/synthesis")),src:No,alt:""})):(l(),r("img",{key:1,class:"icons",onClick:n[1]||(n[1]=e=>o.jumpto("/synthesis")),src:xo,alt:""})),o.locale=="en"?(l(),r("img",{key:2,class:"icons",onClick:n[2]||(n[2]=e=>o.jumpto("/myPet")),src:jo,alt:""})):(l(),r("img",{key:3,class:"icons",onClick:n[3]||(n[3]=e=>o.jumpto("/myPet")),src:Ho,alt:""})),s("img",{class:"icons",onClick:n[4]||(n[4]=e=>o.jumpto("/kong")),src:Io,alt:""}),s("img",{class:"icons",onClick:n[5]||(n[5]=e=>o.jumpto("/ranking")),src:Vo,alt:""})]),s("div",nn,[o.locale=="en"?(l(),r("img",{key:0,class:"icons",onClick:n[6]||(n[6]=e=>o.jumpto("/getHelp")),src:Ko,alt:""})):(l(),r("img",{key:1,class:"icons",onClick:n[7]||(n[7]=e=>o.jumpto("/getHelp")),src:Mo,alt:""})),o.locale=="en"?(l(),r("img",{key:2,class:"icons",onClick:n[8]||(n[8]=e=>o.jumpto("/invite")),src:zo,alt:""})):(l(),r("img",{key:3,class:"icons",onClick:n[9]||(n[9]=e=>o.jumpto("/invite")),src:Eo,alt:""})),o.locale=="en"?(l(),r("img",{key:4,class:"icons",onClick:n[10]||(n[10]=e=>o.jumpto("/airdrop")),src:Fo,alt:""})):(l(),r("img",{key:5,class:"icons",onClick:n[11]||(n[11]=e=>o.jumpto("/airdrop")),src:Go,alt:""}))])]),s("div",tn,[s("button",en,[s("span",null,i(t.$t("今日孵化"))+"：",1),s("span",sn,i(o.userInfo.hatchTodayNum)+i(t.$t("次")),1)]),s("button",an,[s("span",null,i(t.$t("永久孵化"))+"：",1),s("span",ln,i(o.userInfo.hatchPerpetualNum)+i(t.$t("次")),1)])]),o.locale=="en"?(l(),r("img",{key:0,onClick:n[12]||(n[12]=(...e)=>o.buySuper&&o.buySuper(...e)),class:"super",src:Wo,alt:""})):(l(),r("img",{key:1,onClick:n[13]||(n[13]=(...e)=>o.buySuper&&o.buySuper(...e)),class:"super",src:qo,alt:""}))]),s("div",rn,[n[29]||(n[29]=s("img",{class:"egg",src:Oo,alt:""},null,-1)),s("div",cn,[s("span",null,i(t.$t("我的收益"))+"：",1),s("span",un,i(o.userInfo.earning)+"/h",1)]),o.inProgress?(l(),r("div",dn,[s("span",null,i(t.$t("孵化进度")),1),s("div",fn,[p(w,{percentage:(1-o.remainingSecond/o.totalSecond)*100,color:"#F5BB30","show-pivot":!1,"track-color":"#413E5A"},null,8,["percentage"]),s("div",gn,[p(C,{time:o.remainingSecond*1e3,format:"mm"+t.$t("分")+"ss"+t.$t("秒")},null,8,["time","format"])])]),s("img",{onClick:n[16]||(n[16]=e=>o.jumpto("/getHelp")),src:Yo,alt:""})])):(l(),r("div",mn,[s("button",{onClick:n[14]||(n[14]=(...e)=>o.toHatch&&o.toHatch(...e))},i(t.$t("孵化")),1),s("button",{onClick:n[15]||(n[15]=e=>o.showTimes=!0)},i(t.$t("暴击孵化次数")),1)]))]),o.token?z("",!0):(l(),r("div",{key:0,class:"noLoginMask",onClick:n[17]||(n[17]=(...e)=>o.notLogin&&o.notLogin(...e))})),p(v,{show:o.showCenter,"onUpdate:show":n[20]||(n[20]=e=>o.showCenter=e),round:""},{default:k(()=>[s("div",pn,[s("div",null,i(t.$t("是否确认进行孵化操作"))+"？",1),s("div",vn,[s("button",{onClick:n[18]||(n[18]=e=>o.showCenter=!1)},i(t.$t("取消")),1),s("button",{onClick:n[19]||(n[19]=(...e)=>o.onConfirm&&o.onConfirm(...e))},i(t.$t("确定")),1)])])]),_:1},8,["show"]),p(v,{show:o.showSuper,"onUpdate:show":n[23]||(n[23]=e=>o.showSuper=e),round:""},{default:k(()=>[s("div",hn,[s("div",wn,[n[30]||(n[30]=s("img",{src:Ao,alt:""},null,-1)),s("div",null,i(t.$t("您将使用TON购买（超级孵化器），购买后获得永久免除所有宠物蛋孵化时间权益",[o.config[o.configKey[0]]])),1)]),s("div",yn,[s("button",{onClick:n[21]||(n[21]=e=>o.showSuper=!1)},i(t.$t("取消")),1),s("button",{onClick:n[22]||(n[22]=e=>o.toBuy(2))},i(t.$t("购买")),1)])])]),_:1},8,["show"]),p(v,{show:o.showTimes,"onUpdate:show":n[26]||(n[26]=e=>o.showTimes=e),round:""},{default:k(()=>[s("div",kn,[s("div",Cn,[n[31]||(n[31]=s("img",{src:Jo,alt:""},null,-1)),s("div",null,i(t.$t("您将使用TON购买（暴击孵化），购买后获得永久孵化次数次",[o.config[o.configKey[1]],o.config[o.configKey[2]]])),1)]),s("div",Sn,[s("button",{onClick:n[24]||(n[24]=e=>o.showTimes=!1)},i(t.$t("取消")),1),s("button",{onClick:n[25]||(n[25]=e=>o.toBuy(1))},i(t.$t("购买")),1)])])]),_:1},8,["show"]),p(v,{show:o.showGif,"onUpdate:show":n[27]||(n[27]=e=>o.showGif=e),round:""},{default:k(()=>[o.showGif?(l(),r("img",_n)):z("",!0)]),_:1},8,["show"]),p(v,{show:o.showPet,"onUpdate:show":n[28]||(n[28]=e=>o.showPet=e),round:""},{default:k(()=>[s("img",{class:ho(["gif petImg",{petImg1:o.showScale}]),src:o.petUrl,alt:""},null,10,bn)]),_:1},8,["show"])])}const Nn=uo(Xo,[["render",Un],["__scopeId","data-v-a3fe64c8"]]);export{Nn as default};
